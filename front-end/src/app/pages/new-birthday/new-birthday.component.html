<mat-card class="max-w-2xl mx-auto flex flex-col h-[90vh] overflow-hidden" *transloco="let t">
  
  <mat-card-header class="p-4 shrink-0 border-b border-gray-100">
    <mat-card-title class="!text-2xl !font-bold flex items-center gap-2">
      <mat-icon>person_add</mat-icon>
      {{ t('newBirthday.titel') }}
    </mat-card-title>
    <mat-card-subtitle>
      {{ t('newBirthday.subtitle') }}
    </mat-card-subtitle>
  </mat-card-header>

  <mat-card-content class="flex-1 overflow-y-auto p-6 custom-scrollbar">
    <form [formGroup]="profileForm" class="grid grid-cols-1 md:grid-cols-2 gap-6">
      
      <div class="md:col-span-2 flex flex-col items-center mb-4">
        @if(profileImage()) {
          <img [src]="profileImage()" alt="Profile" class="w-32 h-32 rounded-full object-cover border-4 border-white shadow-lg mb-4" />
        } @else {
          <mat-icon class="!text-7xl !h-20 !w-20 text-gray-300">account_circle</mat-icon>
        }

        <input #fileInput type="file" accept="image/*" hidden (change)="onFileSelected($event)" />

        <button mat-stroked-button type="button" (click)="fileInput.click()">
          <mat-icon>add_a_photo</mat-icon>
          {{ t('newBirthday.pic') }}
        </button>
      </div>

      <mat-form-field appearance="outline" class="w-full">
        <mat-label>{{ t('newBirthday.form.name') }}</mat-label>
        <input matInput formControlName="fullName" required />
        <mat-icon matPrefix>person</mat-icon>
        @if (profileForm.get('fullName')?.hasError('required') && profileForm.get('fullName')?.touched) {
          <mat-error>{{ t('newBirthday.form.errors.errorName') }}</mat-error>
        }
      </mat-form-field>

      <mat-form-field appearance="outline" class="w-full">
        <mat-label>{{ t('newBirthday.form.birthday') }}</mat-label>
        <input matInput [matDatepicker]="picker" formControlName="birthdate" />
        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-datepicker #picker></mat-datepicker>
        <mat-icon matPrefix>cake</mat-icon>
      </mat-form-field>

      <mat-form-field appearance="outline" class="w-full">
        <mat-label>{{ t('newBirthday.form.relationship.titel') }}</mat-label>
        <mat-select formControlName="relation">
          <mat-option value="family">{{ t('newBirthday.form.relationship.family') }}</mat-option>
          <mat-option value="friend">{{ t('newBirthday.form.relationship.friend') }}</mat-option>
          <mat-option value="colleague">{{ t('newBirthday.form.relationship.colleague') }}</mat-option>
          <mat-option value="other">{{ t('newBirthday.form.relationship.other') }}</mat-option>
        </mat-select>
        <mat-icon matPrefix>group</mat-icon>
      </mat-form-field>

      <mat-form-field appearance="outline" class="w-full">
        <mat-label>{{ t('newBirthday.form.mail') }}</mat-label>
        <input matInput formControlName="email" type="email" />
        <mat-icon matPrefix>email</mat-icon>
      </mat-form-field>

      <mat-form-field appearance="outline" class="w-full">
        <mat-label>{{ t('newBirthday.form.phone') }}</mat-label>
        <input matInput formControlName="phone" />
        <mat-icon matPrefix>phone</mat-icon>
      </mat-form-field>

      <mat-form-field appearance="outline" class="w-full">
        <mat-label>{{ t('newBirthday.form.city') }}</mat-label>
        <input matInput formControlName="city" />
        <mat-icon matPrefix>location_city</mat-icon>
      </mat-form-field>

      <mat-form-field appearance="outline" class="md:col-span-2 w-full">
        <mat-label>{{ t('newBirthday.form.notes') }}</mat-label>
        <textarea matInput formControlName="notes" rows="3"></textarea>
        <mat-icon matPrefix>note</mat-icon>
      </mat-form-field>

      <div class="md:col-span-2 p-3 bg-gray-50 rounded-lg">
        <mat-slide-toggle formControlName="enableReminders" color="primary">
          {{ t('newBirthday.form.reminders.titel') }}
        </mat-slide-toggle>
        <p class="text-xs text-gray-500 mt-1 pl-10">
          {{ t('newBirthday.form.reminders.subtitel') }}
        </p>
      </div>
    </form>
  </mat-card-content>

  <mat-card-actions class="p-4 m-2 shrink-0 border-t border-gray-100 flex justify-end gap-3 bg-white">
    <button mat-button type="button" (click)="cancel()">
      <mat-icon>cancel</mat-icon>
      {{ t('newBirthday.actions.cancel') }}
    </button>
    <button
      mat-raised-button
      type="submit"
      color="primary"
      (click)="saveProfile()"
      [disabled]="profileForm.invalid"
      class="px-8 shadow-md"
    >
      <mat-icon>save</mat-icon>
      {{ t('newBirthday.actions.save') }}
    </button>
  </mat-card-actions>
</mat-card>